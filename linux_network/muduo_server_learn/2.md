#大型网络架构演变过程
## step1: Web server与数据库分离
web server和数据库同处在一台主机上，这种结构较为简单，但随着网站访问量的增加，当解决web server和数据库瓶颈问题时，由于二者相互影响，因此问题较为复杂。这种情况下，可以将web server和数据库分离开来，让他们处在独立的机器上。以上两种结构都比较简单，不满足网站设计的高可用目标。

### web 资源动静分离
浏览器的请求可以分为静态请求和动态请求，前者指html, js, css，picture请求等，后者包括jsp,php请求。
web server可以由两部分组成，http服务器与应用服务器. http服务器主要静态请求，应用服务器主要用于静态请求。主流的http服务器包括Apache/Nginx等，应用服务器包括JBoss/Tomcat等. 
我们可以将http服务器成为前端服务器，应用服务器成为后端服务器。

## step2: 缓存处理

1.客户端缓存
对于浏览器这边，可以做一个缓存处理，从而减少对网站的缓存。
2.前端页面缓存(squid)
静态页面缓存，减少对于web服务器请求。
3.页面片段缓存ESI(Edge Side Includes)
对于动态页面中相对静态的部分, 可以用ESI做页面片段缓存
4.本地数据缓存(local data cache)
对数据库的数据做本地数据缓存，减少对数据库的缓存。
5.数据库缓存
同样，数据库本身可以视为对文件系统I/O的缓存。

## step3: web server集群+读写分离
增加web服务器，做负载均衡。
### 负载均衡
负载均衡可以分为前端负载均衡、应用服务器负载均衡和数据库负载均衡。这里主要探讨前端负载均衡。
#### 前端负载均衡
DNS负载均衡
    在DNS服务器中，为多个不同的地址配置同一个名字(alias), 对于不同的客户机访问同一个名字，得到不同的地址。

反向代理
使用代理服务器将请求发送给内部服务器，让代理服务器将请求均匀发送给多态内部服务器之一，从而达到负载均衡的目的。标准代理模式是客户使用代理访问多个外部服务器

还有基于NAT的负载均衡技术、LVS、F5硬件负载均衡等。

## step4: CDN、分布式缓存、分库分表

在web server和DAC之间加一个分布式缓存层，这些缓存对所有的web server都是共享的，所以可以增加访问速度。
### 分库
可以按照数据种类的不同分为用户数据、业务数据、和基础数据。
垂直分库指的是将这三种分别放在不同的子数据库中，而水平分区是指在所有的子数据库中都包含着这三种数据。这些子数据库的数据总和等于主数据库的数据总和。

## step5: 多数据中心+分布式存储与计算
关系型数据库所占空间很大，严重影响了性能，我们同样可以增加一个中间层来进行解决。在缓存和DAC之间增加一个中间层：基于分布式文件系统计算架构建立数据中心。

我们可以把关系型数据库中的对一致性要求不高的数据筛选出来，将其放在数据中心中。从而减少数据库的大小.

数据中心的数据是基于Key/value形式来进行处理的，一致性要求较低，因此，其并发性能更好。可以用来nosql来进行处理。

